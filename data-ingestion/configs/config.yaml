server:
  name: data-ingestion
  env: development

# Blockchain API Configuration
blockchain:
  # Supported: ethereum, bsc
  network: ethereum

  # Etherscan API (V2)
  etherscan:
    baseUrl: https://api.etherscan.io/v2/api?chainid=1
    apiKey: ${ETHERSCAN_API_KEY}
    rateLimit: 5 # requests per second

  # BSCScan API (V2)
  bscscan:
    baseUrl: https://api.bscscan.com/v2/api?chainid=56
    apiKey: ${BSCSCAN_API_KEY}
    rateLimit: 5

  # Polling configuration
  polling:
    intervalSeconds: 12 # ~1 block time for Ethereum
    batchSize: 10 # blocks per batch
    startBlock: latest # 'latest' or specific block number
    confirmations: 12 # wait for confirmations
    enableInternalTx: false # fetch internal transactions (expensive, disabled by default)

# Kafka Configuration
# Override with KAFKA_BROKERS or DOCKER_HOST_IP env var for remote deployment
kafka:
  brokers:
    - localhost:19092
  topic: chain-transactions
  producer:
    maxRetries: 3
    retryBackoffMs: 100
    requiredAcks: 1 # 0=none, 1=leader, -1=all
    compression: snappy # none, gzip, snappy, lz4, zstd

# Logging Configuration
logging:
  level: info # debug, info, warn, error
  format: json # json, console
  outputPaths:
    - stdout
    - logs/ingestion.log

# Metrics Configuration
metrics:
  enabled: true
  port: 9091
  path: /metrics
