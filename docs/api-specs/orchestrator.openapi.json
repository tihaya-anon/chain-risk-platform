{"openapi":"3.0.1","info":{"title":"Chain Risk Platform - Orchestrator API","description":"API Gateway and Orchestration layer for Chain Risk Platform.\n\n## Overview\nThe Orchestrator serves two main purposes:\n1. **API Gateway**: Routes requests to BFF with authentication, rate limiting, and circuit breaking\n2. **Orchestration**: Provides aggregated endpoints that combine multiple API calls\n\n## Authentication\nAll endpoints (except /api/v1/auth/**) require JWT authentication.\nInclude the token in the Authorization header: `Bearer <token>`\n\n## Orchestration Endpoints\nThese endpoints aggregate data from multiple services for complex queries:\n- `/api/v1/orchestration/address-profile/{address}` - Basic address profile\n- `/api/v1/orchestration/address-analysis/{address}` - Comprehensive analysis with graph data\n- `/api/v1/orchestration/connection/{from}/{to}` - Find connection between addresses\n- `/api/v1/orchestration/high-risk-network` - High-risk addresses network\n\n## BFF APIs\nSwitch to \"BFF APIs\" in the dropdown above to see all available BFF endpoints.\n","contact":{"name":"Chain Risk Team","email":"chainrisk@example.com"},"license":{"name":"MIT License","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Local Development Server"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Admin API","description":"Pipeline administration and monitoring"},{"name":"Orchestration","description":"Aggregated endpoints that combine multiple API calls for complex queries"}],"paths":{"/api/v1/orchestration/batch-risk-analysis":{"post":{"tags":["Orchestration"],"summary":"Batch address risk analysis","description":"Performs risk analysis for multiple addresses in a single request","operationId":"batchRiskAnalysis","requestBody":{"description":"List of addresses to analyze","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchRiskRequest"}}},"required":true},"responses":{"401":{"description":"Unauthorized - Invalid or missing JWT token","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"200":{"description":"Batch analysis completed","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"500":{"description":"Internal server error during orchestration","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/admin/pipeline/ingestion/{action}":{"post":{"tags":["Admin API"],"summary":"Control data ingestion","description":"Pause, resume, or trigger data ingestion","operationId":"controlIngestion","parameters":[{"name":"action","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/admin/pipeline/graph-sync/{action}":{"post":{"tags":["Admin API"],"summary":"Control graph sync","description":"Pause, resume, or trigger graph synchronization","operationId":"controlGraphSync","parameters":[{"name":"action","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/v1/orchestration/high-risk-network":{"get":{"tags":["Orchestration"],"summary":"Get high-risk network analysis","description":"Retrieves addresses with risk scores above the specified threshold","operationId":"getHighRiskNetwork","parameters":[{"name":"threshold","in":"query","description":"Risk score threshold (0.0 - 1.0)","required":false,"schema":{"type":"number","format":"double","default":0.7},"example":0.7},{"name":"limit","in":"query","description":"Maximum number of addresses to return","required":false,"schema":{"type":"integer","format":"int32","default":20},"example":20}],"responses":{"200":{"description":"High-risk network analysis completed","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"401":{"description":"Unauthorized - Invalid or missing JWT token","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"500":{"description":"Internal server error during orchestration","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/v1/orchestration/connection/{fromAddress}/{toAddress}":{"get":{"tags":["Orchestration"],"summary":"Find connection between addresses","description":"Finds the shortest path between two addresses and provides risk analysis for both endpoints","operationId":"findConnection","parameters":[{"name":"fromAddress","in":"path","description":"Source address (0x-prefixed)","required":true,"schema":{"type":"string"}},{"name":"toAddress","in":"path","description":"Target address (0x-prefixed)","required":true,"schema":{"type":"string"}},{"name":"maxDepth","in":"query","description":"Maximum path depth to search","required":false,"schema":{"type":"integer","format":"int32","default":5},"example":5},{"name":"network","in":"query","description":"Blockchain network","required":false,"schema":{"type":"string","default":"ethereum"},"example":"ethereum"}],"responses":{"200":{"description":"Connection analysis completed","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"401":{"description":"Unauthorized - Invalid or missing JWT token","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"500":{"description":"Internal server error during orchestration","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/v1/orchestration/address-profile/{address}":{"get":{"tags":["Orchestration"],"summary":"Get address profile","description":"Orchestrates multiple API calls to get a comprehensive address profile including basic info, risk score, and recent transfers","operationId":"getAddressProfile","parameters":[{"name":"address","in":"path","description":"Blockchain address (0x-prefixed)","required":true,"schema":{"type":"string"}},{"name":"network","in":"query","description":"Blockchain network","required":false,"schema":{"type":"string","default":"ethereum"},"example":"ethereum"}],"responses":{"200":{"description":"Address profile retrieved successfully","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"401":{"description":"Unauthorized - Invalid or missing JWT token","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"500":{"description":"Internal server error during orchestration","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/v1/orchestration/address-analysis/{address}":{"get":{"tags":["Orchestration"],"summary":"Get comprehensive address analysis","description":"Orchestrates multiple API calls to get comprehensive address analysis including basic info, risk score, graph data, neighbors, tags, and cluster information","operationId":"getAddressAnalysis","parameters":[{"name":"address","in":"path","description":"Blockchain address (0x-prefixed)","required":true,"schema":{"type":"string"}},{"name":"network","in":"query","description":"Blockchain network","required":false,"schema":{"type":"string","default":"ethereum"},"example":"ethereum"},{"name":"neighborDepth","in":"query","description":"Neighbor search depth (1-3)","required":false,"schema":{"type":"integer","format":"int32","default":1},"example":1},{"name":"neighborLimit","in":"query","description":"Maximum number of neighbors to return","required":false,"schema":{"type":"integer","format":"int32","default":20},"example":20}],"responses":{"401":{"description":"Unauthorized - Invalid or missing JWT token","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"200":{"description":"Address analysis retrieved successfully","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}},"500":{"description":"Internal server error during orchestration","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/admin/services":{"get":{"tags":["Admin API"],"summary":"List all registered services","description":"Returns all services registered in Nacos","operationId":"getServices","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/admin/services/{serviceName}":{"get":{"tags":["Admin API"],"summary":"Get service instances","description":"Returns all instances of a specific service","operationId":"getServiceInstances","parameters":[{"name":"serviceName","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/admin/pipeline/status":{"get":{"tags":["Admin API"],"summary":"Get pipeline status","description":"Returns aggregated status of all pipeline components","operationId":"getPipelineStatus","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/api/admin/config/risk":{"get":{"tags":["Admin API"],"summary":"Get risk configuration","description":"Returns current risk scoring configuration from Nacos","operationId":"getRiskConfig","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RiskProperties"}}}}}}},"/api/admin/config/pipeline":{"get":{"tags":["Admin API"],"summary":"Get pipeline configuration","description":"Returns current pipeline configuration from Nacos","operationId":"getPipelineConfig","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PipelineProperties"}}}}}}},"/api/admin/config/all":{"get":{"tags":["Admin API"],"summary":"Get all configurations","description":"Returns all configurations from Nacos","operationId":"getAllConfig","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}}},"components":{"schemas":{"BatchRiskRequest":{"type":"object","properties":{"addresses":{"type":"array","description":"List of addresses to analyze","example":["0x123...","0x456..."],"items":{"type":"string","description":"List of addresses to analyze","example":"[\"0x123...\",\"0x456...\"]"}},"network":{"type":"string","description":"Blockchain network","example":"ethereum"}},"description":"Batch risk analysis request"},"RiskProperties":{"type":"object","properties":{"highThreshold":{"type":"number","format":"double"},"mediumThreshold":{"type":"number","format":"double"},"cacheTtlSeconds":{"type":"integer","format":"int32"}}},"CheckpointConfig":{"type":"object","properties":{"intervalMs":{"type":"integer","format":"int32"}}},"ClusteringConfig":{"type":"object","properties":{"enabled":{"type":"boolean"},"minClusterSize":{"type":"integer","format":"int32"},"maxDepth":{"type":"integer","format":"int32"}}},"ConsumerConfig":{"type":"object","properties":{"maxPollRecords":{"type":"integer","format":"int32"}}},"GraphSyncConfig":{"type":"object","properties":{"enabled":{"type":"boolean"},"intervalMs":{"type":"integer","format":"int64"},"batchSize":{"type":"integer","format":"int32"}}},"IngestionConfig":{"type":"object","properties":{"enabled":{"type":"boolean"},"network":{"type":"string"},"polling":{"$ref":"#/components/schemas/PollingConfig"},"rateLimit":{"$ref":"#/components/schemas/RateLimitConfig"}}},"PipelineProperties":{"type":"object","properties":{"enabled":{"type":"boolean"},"ingestion":{"$ref":"#/components/schemas/IngestionConfig"},"streamProcessor":{"$ref":"#/components/schemas/StreamProcessorConfig"},"graphSync":{"$ref":"#/components/schemas/GraphSyncConfig"},"clustering":{"$ref":"#/components/schemas/ClusteringConfig"},"propagation":{"$ref":"#/components/schemas/PropagationConfig"}}},"PollingConfig":{"type":"object","properties":{"intervalMs":{"type":"integer","format":"int32"},"batchSize":{"type":"integer","format":"int32"},"confirmations":{"type":"integer","format":"int32"}}},"PropagationConfig":{"type":"object","properties":{"enabled":{"type":"boolean"},"maxHops":{"type":"integer","format":"int32"},"decayFactor":{"type":"number","format":"double"},"minThreshold":{"type":"number","format":"double"}}},"RateLimitConfig":{"type":"object","properties":{"requestsPerSecond":{"type":"integer","format":"int32"}}},"StreamProcessorConfig":{"type":"object","properties":{"enabled":{"type":"boolean"},"parallelism":{"type":"integer","format":"int32"},"checkpoint":{"$ref":"#/components/schemas/CheckpointConfig"},"consumer":{"$ref":"#/components/schemas/ConsumerConfig"}}}},"securitySchemes":{"bearerAuth":{"type":"http","description":"JWT token obtained from /api/v1/auth/login","scheme":"bearer","bearerFormat":"JWT"}}}}