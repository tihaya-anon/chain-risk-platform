global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  # Prometheus itself
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]
  # Dataflow
  # Kafka
  - job_name: "kafka-exporter"
    static_configs:
      - targets: ["kafka-exporter:9308"]
    relabel_configs:
      - source_labels: [__address__]
        target_label: instance
        replacement: "kafka"

  # PostgreSQL
  - job_name: "postgres-exporter"
    static_configs:
      - targets: ["postgres-exporter:9187"]
    relabel_configs:
      - source_labels: [__address__]
        target_label: instance
        replacement: "postgres"
  # Application services (uncomment when ready to monitor these services)
  # - job_name: "query-service"
  #   static_configs:
  #     - targets: ["query-service:8081"]

  # - job_name: "risk-ml-service"
  #   static_configs:
  #     - targets: ["risk-ml-service:8082"]

  # - job_name: "alert-service"
  #   static_configs:
  #     - targets: ["alert-service:8083"]
